<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Wartungsfreundliches INotifyPropertyChanged &#8211; LernMoment.de</title>
<meta name="description" content="Verwendest du immer noch strings in OnPropertyChanged?">
<meta name="keywords" content="Syntax, WPF, MVVM">


<!-- Twitter Cards -->
<meta name="twitter:title" content="Wartungsfreundliches INotifyPropertyChanged">
<meta name="twitter:description" content="Verwendest du immer noch strings in OnPropertyChanged?">



<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://localhost:63266/images/banner/lernmoment-wpf.jpg">

<!-- Open Graph -->
<meta property="og:locale" content="de_DE">
<meta property="og:type" content="article">
<meta property="og:title" content="Wartungsfreundliches INotifyPropertyChanged">
<meta property="og:description" content="Verwendest du immer noch strings in OnPropertyChanged?">
<meta property="og:url" content="http://localhost:63266/csharp-programmieren/wartungsfreundliches-inotifypropertychanged/">
<meta property="og:site_name" content="LernMoment.de">

<!-- Webmaster Tools verfication -->
<meta name="google-site-verification" content="sPPXWqQjaSqa_ZgqYPNCyVLLaFzVAFCuf3xDBC-ofwE">



<link rel="canonical" href="http://localhost:63266/csharp-programmieren/wartungsfreundliches-inotifypropertychanged/">
<link href="http://localhost:63266/feed.xml" type="application/atom+xml" rel="alternate" title="LernMoment.de Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:63266/assets/css/main.css">
<!-- Webfonts -->
<script src="//use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="http://localhost:63266/assets/js/vendor/html5shiv.min.js"></script>
  <script src="http://localhost:63266/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://localhost:63266/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:63266/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:63266/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:63266/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:63266/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:63266/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:63266/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">



<div class="navigation-banner">
	
	

	Lerne programmieren mit mir im Kurs: <a href="http://localhost:63266/einstieg-csharp/" >Einstieg in C# -></a>
</div>


<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		    <li><a href="http://localhost:63266/kurse/" >Kurse</a></li>
		  
		    
		    <li><a href="http://localhost:63266/schwerpunkt/" >Dein Weg zum C# Entwickler</a></li>
		  
		    
		    <li><a href="http://localhost:63266/projekt-start/" >Entwicklung & Mentoring</a></li>
		  
		    
		    <li><a href="http://localhost:63266/blog/" >Blog</a></li>
		  
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<header class="masthead">
	
		<div class="wrap">
			<a href="http://localhost:63266/" class="site-logo" rel="home" title="LernMoment.de"><img src="http://localhost:63266/images/site-logo.png" width="200" height="200" alt="LernMoment.de logo" class="animated fadeInDown"></a>
		</div>
	
</header><!-- /.masthead -->


<div class="js-menu-screen menu-screen"></div>


<div id="main" role="main">
  <article class="hentry">
    <img src="http://localhost:63266/images/banner/lernmoment-wpf.jpg" class="entry-feature-image" alt="Wartungsfreundliches INotifyPropertyChanged" >
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"><a href="http://localhost:63266/tags/#Syntax" title="Pages tagged Syntax">Syntax</a>&nbsp;&bull;&nbsp;<a href="http://localhost:63266/tags/#WPF" title="Pages tagged WPF">WPF</a>&nbsp;&bull;&nbsp;<a href="http://localhost:63266/tags/#MVVM" title="Pages tagged MVVM">MVVM</a></span>
        
          <h1 class="entry-title">Wartungsfreundliches INotifyPropertyChanged</h1>
        
      </header>
      <footer class="entry-meta">
        
        <span class="author vcard">Von <span class="fn">Jan Suchotzki</span></span>
        <span class="entry-date date published"><time datetime="2015-08-13T06:00:00+02:00"><i class="fa fa-calendar-o"></i> 13. August 2015</time></span>
        
        
        
        
      </footer>
      <div class="entry-content">
        <p>Egal ob WPF mit oder ohne MVVM, Windows Forms oder einfach nur zwischen zwei Klassen, Datenbindung in C# ist cool! Seit C# 5.0, also .NET 4.5, ist es noch cooler. Bis dahin, war die Implementierung von <code class="highlighter-rouge">INotifyPropertyChanged</code> entweder problematisch in der Wartung, oder langsam. Dann hat das Entwicklungsteam in Redmond ein Einsehen gehabt und hat das <code class="highlighter-rouge">[CallerMemberName]</code> Attribut eingeführt.</p>

<p>Um deine Klasse mit Datenbindung verwenden zu können, musst du das Interface <code class="highlighter-rouge">INotifyPropertyChanged</code> implementieren. Das ist eigentlich ganz einfach, weil dieses Interface lediglich ein Event beinhaltet. Blöd ist nur, dass die zu übergebenden <code class="highlighter-rouge">PropertyChangedEventArgs</code> den Namen der geänderten Eigenschaft beinhalten müssen.</p>

<p>Daher blieb dir bisher nichts anderes übrig, als Eigenschaften die für die Datenbindung relevant sind, so oder ähnlich zu realisieren:</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="kt">string</span> <span class="n">TolleEigenschaft</span>
<span class="p">{</span>
	<span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_tolleEigenschaft</span><span class="p">;</span> <span class="p">}</span>
	<span class="k">set</span>
	<span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span> <span class="n">_tolleEigenschaft</span> <span class="p">!=</span> <span class="k">value</span> <span class="p">)</span>
		<span class="p">{</span>
			<span class="n">_tolleEigenschaft</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span>
			<span class="nf">OnPropertyChanged</span><span class="p">(</span><span class="s">"TolleEigenschaft"</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Das ist alles kein Hexenwerk, aber es hat seine Herausforderungen. Was ist, wenn du den Namen der Eigenschaft änderst? Solange du den String in <code class="highlighter-rouge">OnPropertyChanged</code> auch änderst ist alles gut. Wenn nicht funktioniert deine Datenbindung nicht und du weißt nicht warum. Im Quelltext zum LernMoment <a href="/csharp-programmieren/command-canexecute/">Command.CanExecute</a> habe ich eine Basisklasse verwendet, die diesem Problem ein wenig vorbeugt, aber schön ist das immer noch nicht. Es gibt eine Alternative mit Lambda-Ausdruck, aber damit wird deine Oberfläche insbesondere bei vielen Aufrufen merklich langsamer.</p>

<p>Das <code class="highlighter-rouge">[CallerMemberName]</code> Attribut aus dem Namensraum <code class="highlighter-rouge">System.Runtime.CompilerServices</code> kommt dir zur Hilfe. Du kannst es vor einen Parameter in einer Methode platzieren. Die einzige Bedingung ist, dass du für den Parameter einen Standardwert definierst.</p>

<p>Dieses Attribut macht nichts weiter, als dem Compiler zu sagen, dass er den Namen des Aufrufers als Wert für den Parameter einsetzen soll. Somit ist es auch egal ob eine Methode mit diesem Attribut von einem Event, einer Eigenschaft oder einer Methode aufgerufen wird. Dieses kann der Compiler ohne Probleme auflösen und den passenden Namen einsetzen.</p>

<p>Eine entsprechend angepasste <code class="highlighter-rouge">OnPropertyChanged</code> Methode und würde also so aussehen:</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">private</span> <span class="k">void</span> <span class="nf">OnPropertyChanged</span><span class="p">([</span><span class="n">CallerMemberName</span><span class="p">]</span> <span class="n">String</span> <span class="n">caller</span> <span class="p">=</span> <span class="k">null</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">handler</span> <span class="p">=</span> <span class="n">PropertyChanged</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">handler</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nf">handler</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">new</span> <span class="nf">PropertyChangedEventArgs</span><span class="p">(</span><span class="n">caller</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Wenn deine Klasse, oder vielleicht besser eine Basisklasse <code class="highlighter-rouge">INotifyPropertyChanged</code> und die <code class="highlighter-rouge">OnPropertyChanged</code> Methode von oben implementiert, dann brauchst du aus den Eigenschaften, die an der Datenbindung teilnehmen, einfach nur <code class="highlighter-rouge">OnPropertyChanged()</code> aufrufen.</p>

<p>Jetzt erstmal viel Spaß mit dem ändern von Daten ohne String</p>

<p>Jan</p>

<h3 id="merke">Merke</h3>

<ul>
  <li>Die Verwendung von Strings in <code class="highlighter-rouge">OnPropertyChanged</code> macht insbesondere Probleme bei der Umbenennung von Eigenschaften.</li>
  <li>Bei häufigem Aufruf kann die Realisierung von <code class="highlighter-rouge">INotifyPropertyChanged</code> mit Lambda-Ausdrücken zu schlechterer Performance führen.</li>
  <li>Das Attribut <code class="highlighter-rouge">[CallerMemberName]</code> ist im Namensraum <code class="highlighter-rouge">System.Runtime.CompilerServices</code> definiert.</li>
  <li>Wenn du das Attribut verwendest, wird der Compiler den passenden Namen für dich einsetzen.</li>
  <li>Das Attribut wird vor einen Parameter in einer Methode geschrieben. Dieser Parameter muss einen Standardwert haben.</li>
</ul>

<h3 id="lernquiz">Lernquiz</h3>

<p>Verwende folgende Fragen, um das Gelernte von heute zu festigen:</p>

<ul>
  <li>Wie sieht die Implementierung einer Eigenschaft aus, wenn sie an der Datenbindung teilnehmen soll und deine <code class="highlighter-rouge">OnPropertyChanged</code> Methode das <code class="highlighter-rouge">[CallerMemberName]</code> Attribut verwendet?</li>
  <li>An welcher Stelle musst du das <code class="highlighter-rouge">[CallerMemberName]</code> Attribut platzieren?</li>
  <li>Wird das Attribut zur Laufzeit ausgewertet?</li>
</ul>

<p>Am besten schaust du dir morgen und dann nochmal in ein paar Tagen die vorherigen Fragen an und beantwortest sie, ohne den Text vorher gelesen zu haben.</p>

<h3 id="weitere-informationen">Weitere Informationen</h3>

<ul>
  <li>Heute kein Beispiel.</li>
  <li>Eine Beschreibung der neuen Attribute gibt es bei <a href="https://msdn.microsoft.com/de-de/library/hh534540.aspx">MSDN</a>.</li>
  <li>Ein “How To” bezüglich der Implementierung von <code class="highlighter-rouge">INotifyPropertyChanged</code> im Kontext von Windows Forms gibt es auch bei <a href="https://msdn.microsoft.com/de-de/library/ms229614(v=vs.110).aspx">MSDN</a></li>
</ul>

        
          <div class="subscribe-notice">
            <h5>Dieser LernMoment hat dir gefallen? <br> Dann melde dich an und du wirst über neue LernMomente informiert:</h5>
                <form action="https://lernmoment.us9.list-manage.com/subscribe/post" method="POST" target="_blank">
      <input type="hidden" name="u" value="d0206d57f5002e40b651a0f60">
      <input type="hidden" name="id" value="8845c28e62">
      <input type="email" class="subscribe-notice-input-box" autocapitalize="off" autocorrect="off" name="MERGE0" id="MERGE0" size="25" value="" placeholder="Deine E-Mail-Adresse">
      <input type="text" class="subscribe-notice-input-box" name="MERGE1" id="MERGE1" size="25" value="" placeholder="Dein Vorname (optional)">
      
        <input type="checkbox" id="group_1" name="group[20205][1]" value="1" checked="true" style="display:none">
      
      <input type="submit" class="subscribe-notice-button" name="submit" value="Ich bin dabei!">
      <legend class="subscribe-notice-legend">Du bekommst in unregelmäßigen Abständen Mails von mir, in denen ich dich auf neue Artikel oder Angebote hinweise, die in das gleiche Themengebiet fallen wie dieser Artikel.</legend>
    </form>

          </div>
        
        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="http://localhost:63266/csharp-programmieren/kombinierte-formatierung-fuer-konsole-datei/" class="btn" title="Kombinierte Formatierung für Konsole, Datei, ...">Vorheriger</a>
      
      
        <a href="http://localhost:63266/csharp-programmieren/tap-eap-apm-asynchron-abgekuerzt/" class="btn" title="Asynchron abgekürzt: APM, EAP und TAP">Nächster</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    

<div class="social-icons">
	
	
	
	<a href="http://www.youtube.com/channel/UC5jCUQ6IPHtQP5r4y9byCqA" title="Jan Suchotzki on YouTube" target="_blank"><i class="fa fa-youtube fa-2x"></i></a>
	
	<a href="http://stackoverflow.com/users/5258906/jan-suchotzki" title="Jan Suchotzki on StackExchange" target="_blank"><i class="fa fa-stack-exchange fa-2x"></i></a>
	
	
	<a href="http://github.com/lernmoment" title="Jan Suchotzki on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
	
    
	
  <a href="http://localhost:63266/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a>
</div><!-- /.social-icons -->
<span>Danke an <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> und <a href="http://mademistakes.com/so-simple/" rel="nofollow">Made Mistakes</a> für hervorragende Tools.</span>
<br>
<span><a href="http://localhost:63266/kein-copyright/">Kein Copyright</a>    -    <a href="http://localhost:63266/impressum/">Impressum</a>    -    <a href="http://localhost:63266/datenschutz/">Datenschutz</a></span>

  </footer>
</div><!-- /.footer-wrapper -->

<script type="text/javascript">
  var BASE_URL = 'http://localhost:63266';
</script>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:63266/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:63266/assets/js/scripts.min.js"></script>




</body>
</html>
