<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Vorsicht Optimierung: Die Klasse StringBuilder &#8211; LernMoment.de</title>
<meta name="description" content="Regeln der Optimierung: 1.) Tue es nicht, 2.) Tue es noch nicht!">
<meta name="keywords" content="Methoden, string">


<!-- Twitter Cards -->
<meta name="twitter:title" content="Vorsicht Optimierung: Die Klasse StringBuilder">
<meta name="twitter:description" content="Regeln der Optimierung: 1.) Tue es nicht, 2.) Tue es noch nicht!">



<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://localhost:63266/images/banner/lernmoment-csharp.jpg">

<!-- Open Graph -->
<meta property="og:locale" content="de_DE">
<meta property="og:type" content="article">
<meta property="og:title" content="Vorsicht Optimierung: Die Klasse StringBuilder">
<meta property="og:description" content="Regeln der Optimierung: 1.) Tue es nicht, 2.) Tue es noch nicht!">
<meta property="og:url" content="http://localhost:63266/csharp-programmieren/optimierung-mit-stringbuilder/">
<meta property="og:site_name" content="LernMoment.de">

<!-- Webmaster Tools verfication -->
<meta name="google-site-verification" content="sPPXWqQjaSqa_ZgqYPNCyVLLaFzVAFCuf3xDBC-ofwE">



<link rel="canonical" href="http://localhost:63266/csharp-programmieren/optimierung-mit-stringbuilder/">
<link href="http://localhost:63266/feed.xml" type="application/atom+xml" rel="alternate" title="LernMoment.de Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:63266/assets/css/main.css">
<!-- Webfonts -->
<script src="//use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="http://localhost:63266/assets/js/vendor/html5shiv.min.js"></script>
  <script src="http://localhost:63266/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://localhost:63266/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:63266/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:63266/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:63266/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:63266/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:63266/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:63266/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">



<div class="navigation-banner">
	
	

	Lerne programmieren mit mir im Kurs: <a href="http://localhost:63266/einstieg-csharp/" >Einstieg in C# -></a>
</div>


<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		    <li><a href="http://localhost:63266/kurse/" >Kurse</a></li>
		  
		    
		    <li><a href="http://localhost:63266/schwerpunkt/" >Dein Weg zum C# Entwickler</a></li>
		  
		    
		    <li><a href="http://localhost:63266/projekt-start/" >Entwicklung & Mentoring</a></li>
		  
		    
		    <li><a href="http://localhost:63266/blog/" >Blog</a></li>
		  
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<header class="masthead">
	
		<div class="wrap">
			<a href="http://localhost:63266/" class="site-logo" rel="home" title="LernMoment.de"><img src="http://localhost:63266/images/site-logo.png" width="200" height="200" alt="LernMoment.de logo" class="animated fadeInDown"></a>
		</div>
	
</header><!-- /.masthead -->


<div class="js-menu-screen menu-screen"></div>


<div id="main" role="main">
  <article class="hentry">
    <img src="http://localhost:63266/images/banner/lernmoment-csharp.jpg" class="entry-feature-image" alt="Vorsicht Optimierung: Die Klasse StringBuilder" >
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"><a href="http://localhost:63266/tags/#Methoden" title="Pages tagged Methoden">Methoden</a>&nbsp;&bull;&nbsp;<a href="http://localhost:63266/tags/#string" title="Pages tagged string">string</a></span>
        
          <h1 class="entry-title">Vorsicht Optimierung: Die Klasse StringBuilder</h1>
        
      </header>
      <footer class="entry-meta">
        
        <span class="author vcard">Von <span class="fn">Jan Suchotzki</span></span>
        <span class="entry-date date published"><time datetime="2015-08-05T06:00:00+02:00"><i class="fa fa-calendar-o"></i> 05. August 2015</time></span>
        
        
        
        
      </footer>
      <div class="entry-content">
        <p>Optimierung ist eines der Themen bei denen es mir wirklich schwer fällt nicht missionarisch zu werden. Meine Einstellung zum Thema kannst du ganz gut anhand folgender Optimierungsregeln erkennen:</p>

<blockquote>
  <p>Regeln für das Optimieren:
Regel 1: Tue es <strong>nicht</strong>
Regel 2 (nur für Experten): Tue es <strong>noch nicht</strong>
	<cite><a href="http://c2.com/cgi/wiki?RulesOfOptimization">M. A. Jackson</a></cite></p>
</blockquote>

<p>Was aber hat das alles mit der Klasse <code class="highlighter-rouge">StringBuilder</code> im Namensraum <code class="highlighter-rouge">System.Text</code> zutun? Diese Klasse bietet dir die Möglichkeit die Arbeit mit Strings bezüglich Performance zu optimieren. Jedesmal, wenn du <code class="highlighter-rouge">string</code> verwendest, dann verwendest du unveränderliche Objekte. Das einfache Verknüpfen von Strings geht immer einher mit dem anlegen von neuen Objekten.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">string</span> <span class="n">ausgabe</span> <span class="p">=</span> <span class="s">"Hallo"</span><span class="p">;</span>
<span class="n">ausgabe</span> <span class="p">+=</span> <span class="s">" Welt!"</span><span class="p">;</span>
</code></pre></div></div>

<p>In dem vorherigen Beispiel wird beim ausführen von <code class="highlighter-rouge">+=</code> nicht etwa der existierende string <code class="highlighter-rouge">ausgabe</code> erweitert, sondern es wird ein neues Objekt erstellt und dann <code class="highlighter-rouge">ausgabe</code> zugewiesen. Wenn du also diesen Operator in einer Schleife mit vielen tausend Durchläufen verwendest, kann dich das schon einige hundert Millisekunden an Rechenzeit und einigen Speicher kosten.</p>

<p>Eine Möglichkeit der Optimierung bietet die Klasse <code class="highlighter-rouge">StringBuilder</code>. Sie repräsentiert eine dynamisch wachsende Zeichenkette. Über die Eigenschaft <code class="highlighter-rouge">Capacity</code> wird festgelegt, wie viele Zeichen alloziert werden. Der Standardwert ist 16 und somit wird beim anlegen einer Instanz von <code class="highlighter-rouge">StringBuilder</code> automatisch für 16 Zeichen Speicher alloziert.</p>

<p>Das vorherige Beispiel könntest du also mit <code class="highlighter-rouge">StringBuilder</code> so realisieren:</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">ausgabe</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">(</span><span class="s">"Hallo"</span><span class="p">);</span>
<span class="n">ausgabe</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="s">" Welt!"</span><span class="p">);</span>
</code></pre></div></div>

<p>Anhand dieses Beispiels zeigen sich gleich einige Probleme, die du bezüglich Optimierung bedenken solltest:</p>

<ol>
  <li>Optimieren ist aufwändig: Wird in der Variante mit <code class="highlighter-rouge">StringBuilder</code> etwas eingespart? In dem Beispiel hier eher nicht. In einer Schleife mit vielen Durchläufen vielleicht schon. Du solltest aber immer eine genaue Analyse machen, was es tatsächlich bringt.</li>
  <li>Optimieren hat einen schlechten Einfluss auf die Verständlichkeit. Kanntest du die Klasse <code class="highlighter-rouge">StringBuilder</code> vorher? Weißt du welche Eigenschaften und Methoden sie hat? Wahrscheinlich nicht auswendig. Anders ist es bei den wichtigen Methoden eines strings. Diese kennen wohl die meisten, oder du kannst es wenigstens besser erahnen.</li>
  <li>Du entwickelst für den Kunden, nicht für dich. Häufig werden Optimierungen, die letztlich das Geld des Kunden kosten, ausgeführt, obwohl diesem es gar nicht wichtig ist. Wenn du ihn fragst, dann sagt er Performance ist wichtig. Wird er es aber merken?</li>
</ol>

<p>Jetzt erstmal viel Spaß beim <strong>nicht</strong> optimieren</p>

<p>Jan</p>

<p>PS: Es gibt sicherlich Situationen in denen du optimieren kannst, aber sei dir sicher, dass du es <strong>wirklich</strong> brauchst.</p>

<h3 id="merke">Merke</h3>

<ul>
  <li>In .NET sind strings unveränderliche Objekte.</li>
  <li>Die Klasse <code class="highlighter-rouge">StringBuilder</code> repräsentiert eine dynamisch wachsende Zeichenkette.</li>
  <li>Optimierung kann in (wenigen) ausgewählten Situationen sinnvoll sein.</li>
  <li>Optimierung geht immer zu lasten der (allgemeinen) Verständlichkeit.</li>
  <li>Wenn du optimierst, dann sei dir sicher, dass du es richtig machst (Profiler verwenden) und das es einen wirklichen Nutzen für deinen Kunden hat.</li>
</ul>

<h3 id="lernquiz">Lernquiz</h3>

<p>Verwende folgende Fragen um das gelernte von heute zu festigen:</p>

<ul>
  <li>Wie legst du eine dynamische Zeichenkette mit der Klasse <code class="highlighter-rouge">StringBuilder</code> an?</li>
  <li>Was sagt die Eigenschaft <code class="highlighter-rouge">Capacity</code> aus?</li>
  <li>Welche Nachteile musst du (wahrscheinlich) in kaufen nehmen, wenn du optimierst?</li>
</ul>

<p>Am besten du schaust dir morgen und dann nochmal in ein paar Tagen die vorherigen Fragen an und beantwortest sie ohne den Text vorher gelesen zu haben.</p>

<h3 id="weitere-informationen">Weitere Informationen</h3>

<ul>
  <li>Heute kein Quellcode. Beschreibung und Beispiele zur Klasse <code class="highlighter-rouge">StringBuilder</code> findest du in <a href="https://msdn.microsoft.com/de-de/library/system.text.stringbuilder(v=vs.110).aspx">MSDN</a>.</li>
  <li><a href="http://ccd.ralfw.domainfactory-kunde.de/die-grade/roter-grad/#Vorsicht_vor_Optimierungen">“Vorsicht vor Optimierungen!”</a> ist eines der Prinzipien im roten Grad des <a href="http://ccd.ralfw.domainfactory-kunde.de">Clean Code Developers</a>.</li>
  <li>Einen guten Artikel (allerdings nur in Englisch) zum Thema Optimierung mit StringBuilder findest du <a href="http://blog.codinghorror.com/the-sad-tragedy-of-micro-optimization-theater/">hier</a>.</li>
</ul>

        
          <div class="subscribe-notice">
            <h5>Dieser LernMoment hat dir gefallen? <br> Dann melde dich an und du wirst über neue LernMomente informiert:</h5>
                <form action="https://lernmoment.us9.list-manage.com/subscribe/post" method="POST" target="_blank">
      <input type="hidden" name="u" value="d0206d57f5002e40b651a0f60">
      <input type="hidden" name="id" value="8845c28e62">
      <input type="email" class="subscribe-notice-input-box" autocapitalize="off" autocorrect="off" name="MERGE0" id="MERGE0" size="25" value="" placeholder="Deine E-Mail-Adresse">
      <input type="text" class="subscribe-notice-input-box" name="MERGE1" id="MERGE1" size="25" value="" placeholder="Dein Vorname (optional)">
      
        <input type="checkbox" id="group_1" name="group[20205][1]" value="1" checked="true" style="display:none">
      
      <input type="submit" class="subscribe-notice-button" name="submit" value="Ich bin dabei!">
      <legend class="subscribe-notice-legend">Du bekommst in unregelmäßigen Abständen Mails von mir, in denen ich dich auf neue Artikel oder Angebote hinweise, die in das gleiche Themengebiet fallen wie dieser Artikel.</legend>
    </form>

          </div>
        
        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="http://localhost:63266/csharp-programmieren/automatisch-implementierte-eigenschaften-syntax/" class="btn" title="Automatisch Implementierte Eigenschaften - Die C# 6.0 Syntax">Vorheriger</a>
      
      
        <a href="http://localhost:63266/csharp-programmieren/der-garbage-collector/" class="btn" title="Der Garbage Collector">Nächster</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    

<div class="social-icons">
	
	
	
	<a href="http://www.youtube.com/channel/UC5jCUQ6IPHtQP5r4y9byCqA" title="Jan Suchotzki on YouTube" target="_blank"><i class="fa fa-youtube fa-2x"></i></a>
	
	<a href="http://stackoverflow.com/users/5258906/jan-suchotzki" title="Jan Suchotzki on StackExchange" target="_blank"><i class="fa fa-stack-exchange fa-2x"></i></a>
	
	
	<a href="http://github.com/lernmoment" title="Jan Suchotzki on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
	
    
	
  <a href="http://localhost:63266/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a>
</div><!-- /.social-icons -->
<span>Danke an <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> und <a href="http://mademistakes.com/so-simple/" rel="nofollow">Made Mistakes</a> für hervorragende Tools.</span>
<br>
<span><a href="http://localhost:63266/kein-copyright/">Kein Copyright</a>    -    <a href="http://localhost:63266/impressum/">Impressum</a>    -    <a href="http://localhost:63266/datenschutz/">Datenschutz</a></span>

  </footer>
</div><!-- /.footer-wrapper -->

<script type="text/javascript">
  var BASE_URL = 'http://localhost:63266';
</script>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:63266/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:63266/assets/js/scripts.min.js"></script>




</body>
</html>
